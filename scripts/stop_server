#!/bin/bash
# Tolerant stop: never fail if not running / not installed
set -u
log(){ echo "[stop_server] $*"; }

stopped=0
for svc in httpd apache2; do
  if systemctl list-unit-files | grep -q "^${svc}\.service"; then
    log "Stopping ${svc} if running..."
    sudo systemctl stop "$svc" || true
    stopped=1
  fi
done

if [ "$stopped" -eq 0 ]; then
  log "No httpd/apache2 service found; nothing to stop."
fi

exit 0
